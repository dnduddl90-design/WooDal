# 프로젝트 개요 & 아키텍처

> 우영달림 가계부 - 전체 구조 및 SOLID 원칙

**작성일**: 2025-10-15
**난이도**: ⭐⭐⭐⭐ (고급)

---

## 📋 프로젝트 정보

| 항목 | 내용 |
|------|------|
| **프로젝트명** | 우영달림 커플 가계부 |
| **목적** | 커플/가족을 위한 실시간 동기화 가계부 |
| **기술 스택** | React 19.2.0 + Firebase + Tailwind CSS |
| **아키텍처** | SOLID 원칙 기반 모듈화 |
| **배포** | Firebase Hosting (PWA) |

**주요 기능**:
1. 거래 관리 (수입/지출)
2. 고정지출 자동 등록
3. 예산 관리 및 진행률
4. 통계 분석 (월별 비교)
5. 가족 공유 (실시간 동기화)
6. PWA (오프라인 지원)

---

## 🏗️ 아키텍처

### 계층 구조

```
┌─────────────────────────────────────────┐
│         사용자 인터페이스 (UI)          │
│         Pages & Components              │
└──────────────┬──────────────────────────┘
               │
┌──────────────▼──────────────────────────┐
│          상태 관리 레이어               │
│          Custom Hooks                   │
│  useAuth | useTransactions | useSettings│
└──────────────┬──────────────────────────┘
               │
┌──────────────▼──────────────────────────┐
│         비즈니스 로직 레이어            │
│           Services                      │
│  TransactionService | AutoRegister     │
└──────────────┬──────────────────────────┘
               │
┌──────────────▼──────────────────────────┐
│          데이터 레이어                  │
│     Firebase + LocalStorage             │
│  databaseService | storageUtils         │
└─────────────────────────────────────────┘
```

### 폴더 구조

```
src/
├── constants/          # 카테고리, 사용자, 결제 수단
├── utils/              # 날짜, 포맷, 스토리지 유틸
├── services/           # 비즈니스 로직 (TransactionService)
├── firebase/           # Firebase 설정 및 CRUD
├── hooks/              # Custom Hooks (상태 관리)
├── components/
│   ├── common/         # Button, Input, Modal
│   ├── forms/          # TransactionForm, FixedExpenseForm
│   └── layout/         # Header, Sidebar
├── pages/              # LoginPage, CalendarPage, StatisticsPage 등
└── App.js              # 상태 오케스트레이션
```

---

## 🎯 SOLID 원칙

### 1. SRP (Single Responsibility Principle)

**하나의 파일 = 하나의 책임**

```javascript
// formatUtils.js - 포맷팅만
export const formatCurrency = (amount) => { /* ... */ };
export const formatDate = (date) => { /* ... */ };

// dateUtils.js - 날짜 계산만
export const getDaysInMonth = (date) => { /* ... */ };
```

### 2. OCP (Open/Closed Principle)

**확장에는 열려있고, 수정에는 닫혀있다**

```javascript
// Button 컴포넌트 - variant로 확장
<Button variant="primary">저장</Button>
<Button variant="danger">삭제</Button>
<Button variant="success">추가</Button>  // ✅ 새로운 variant 추가
```

### 3. LSP (Liskov Substitution Principle)

**파생 클래스는 기본 클래스를 대체 가능**

```javascript
// 모든 Page 컴포넌트는 동일한 인터페이스
{currentView === 'calendar' && <CalendarPage {...props} />}
{currentView === 'statistics' && <StatisticsPage {...props} />}
```

### 4. ISP (Interface Segregation Principle)

**필요한 것만 import**

```javascript
// ✅ 필요한 것만
import { formatCurrency } from '../utils';

// ❌ 모든 것을
import * as Utils from '../utils';
```

### 5. DIP (Dependency Inversion Principle)

**추상에 의존, 구체에 의존 X**

```javascript
// ✅ Props로 의존성 주입
const StatisticsPage = ({ transactions, onDateChange }) => {
  // transactions의 출처를 알 필요 없음
};
```

---

## 🔄 데이터 흐름

### 거래 추가 플로우

```
[1] 사용자 "+" 버튼 클릭
     ↓
[2] App.js → setShowAddTransaction(true)
     ↓
[3] TransactionForm 모달 열림
     ↓
[4] 사용자 폼 입력 후 "저장"
     ↓
[5] handleAddTransaction() 호출
     ↓
[6] Firebase saveTransaction()
     ↓
[7] Firebase 리스너 변경 감지
     ↓
[8] setTransactions() → UI 자동 업데이트
```

### 가족 모드 전환

```
[1] handleCreateFamily()
     ↓
[2] Firebase families/{familyId} 생성
     ↓
[3] users/{userId}/familyId 설정
     ↓
[4] useAuth → familyInfo 설정
     ↓
[5] useTransactions → 모드 전환
     - users/{userId}/transactions (개인)
     - families/{familyId}/transactions (가족) ✅
```

---

## 🎓 학습 로드맵

### 초급 (1-2주)
- [ ] 폴더 구조 이해
- [ ] 기본 컴포넌트 (Button, Input)
- [ ] CATEGORIES, formatCurrency 사용법

### 중급 (2-3주)
- [ ] Custom Hooks (useAuth, useTransactions)
- [ ] Firebase 실시간 리스너
- [ ] TransactionService 비즈니스 로직

### 고급 (3-4주)
- [ ] SOLID 원칙 적용 사례 분석
- [ ] useMemo/useCallback 최적화
- [ ] Error Boundary, Compound Pattern

### 실전 (4주+)
- [ ] 새 기능 추가 (독립적으로)
- [ ] 리팩토링 연습
- [ ] Firebase 배포

---

## 📚 학습 자료

### 문서 구조

```
학습자료/
├── 00-프로젝트-개요.md (이 문서) ⭐
├── 인프라-가이드.md (PWA, Git)
├── 기능-구현-가이드.md (아이콘, 고정지출, 예산, 통계)
└── 07-버그수정-성능최적화.md (useCallback, useMemo)
```

**학습 순서**:
1. 이 문서로 전체 구조 파악
2. `기능-구현-가이드.md`로 핵심 기능 학습
3. `07-버그수정-성능최적화.md`로 최적화 학습
4. `인프라-가이드.md`로 배포 학습

### 외부 자료

- [React 공식 문서](https://react.dev)
- [Firebase 문서](https://firebase.google.com/docs)
- [Tailwind CSS](https://tailwindcss.com)
- [SOLID 원칙](https://ko.wikipedia.org/wiki/SOLID_(%EA%B0%9D%EC%B2%B4_%EC%A7%80%ED%96%A5_%EC%84%A4%EA%B3%84))

---

## 🔧 개발 명령어

```bash
npm install          # 의존성 설치
npm start            # 개발 서버 (localhost:3000)
npm run build        # 프로덕션 빌드
npm test             # 테스트 실행
```

---

## 🚀 다음 단계

1. **Firebase Security Rules**: 데이터 보안 강화
2. **TypeScript 마이그레이션**: 타입 안정성
3. **테스트 작성**: Jest + React Testing Library
4. **CI/CD**: GitHub Actions 자동 배포

---

**작성자**: Claude Code
**버전**: 2.0 (간소화)
**라이선스**: MIT

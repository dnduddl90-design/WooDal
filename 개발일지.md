# 🚀 우영달림 가계부 - 개발 일지

**프로젝트명**: 우영♥달림 커플 가계부
**최종 수정**: 2025-10-21
**현재 상태**: Phase 16 완료 (주식 포트폴리오 시각화)

---

## 📋 목차

1. [프로젝트 개요](#프로젝트-개요)
2. [개발 이력 요약](#개발-이력-요약)
3. [주요 기능](#주요-기능)
4. [기술 스택](#기술-스택)
5. [다음 단계](#다음-단계)

---

## 프로젝트 개요

### 목표
부부/커플을 위한 **실시간 동기화 공유 가계부** 웹앱

### 핵심 기능
- ✅ Google 로그인
- ✅ 실시간 가계부 동기화 (Firebase)
- ✅ 가족 공유 모드 / 개인 모드
- ✅ 달력 기반 거래 관리
- ✅ 통계 및 차트
- ✅ 고정지출 자동 등록
- ✅ 용돈 관리 (추적 + 개인 관리)
- ✅ 모바일 반응형 UI

### 사용자
- **우영** (👨): 관리자
- **달림** (👩): 사용자

---

## 개발 이력 요약

### Phase 1-3: 기반 구축 (2025-10-13 ~ 10-14)
**완료 사항**:
- SOLID 원칙 기반 리팩토링 (2177줄 → 모듈화)
- Firebase Authentication (Google 로그인)
- Firebase Realtime Database 연동
- LocalStorage → Firebase 자동 마이그레이션

**주요 성과**:
- 파일당 평균 100줄 이하로 모듈화
- 실시간 동기화 구현
- 데이터 영구 저장

---

### Phase 4-7: 공유 기능 및 UI (2025-10-15 ~ 10-16)
**완료 사항**:
- 가족 공유 가계부 기능
- 가족 관리 UI (생성, 초대, 탈퇴)
- 이메일 초대 시스템
- 모바일 반응형 구현

**주요 성과**:
- 가족/개인 모드 자동 전환
- 초대 링크 생성 및 처리
- 640px 브레이크포인트 모바일 최적화

---

### Phase 8-12: 추가 기능 (2025-10-16)
**완료 사항**:
- 주식 포트폴리오 기능 (숨김 처리)
- 고정지출 자동 등록
- 테마 시스템 (다크모드 준비)
- 검색 기능

**주요 성과**:
- 고정지출 매달 자동 등록
- 기간별 설정 가능 (시작일~종료일)
- 저축 카테고리 추가

---

### Phase 13: UX 개선 (주말 작업)
**완료 사항**:
- PC/모바일 달력 UX 차별화
  - PC: 날짜 상세 모달만 표시
  - 모바일: 직접 편집 가능
- 주식 메뉴 숨김 (코드 유지)

**주요 성과**:
- 화면 크기별 최적화된 UX
- 이벤트 버블링 제어

---

### Phase 14: 용돈 추적 기능 (2025-10-21)
**완료 사항**:
- 거래 입력 시 `isPocketMoney` 체크박스 추가
- 통계 페이지에 용돈 사용 내역 표시
- 정산 완료 기능 (isPocketMoney → false)
- 사용자별 아바타 및 이름 표시 개선

**주요 성과**:
- 용돈 사용 추적 및 정산 시스템
- 통계에서 사용자별 용돈 사용 현황 확인

---

### Phase 15: 개인 용돈 관리 페이지 (2025-10-21)
**완료 사항**:
1. **기본 페이지 구현**
   - 월별 용돈 잔고 관리
   - 거래 추가/삭제
   - 통계 (일평균, 최대 지출, 거래 건수)

2. **잔고 관리 기능**
   - ➕ 추가: 잔고에 금액 더하기
   - ➖ 차감: 잔고에서 금액 빼기
   - ✏️ 수정: 잔고 직접 설정

3. **이월 기능**
   - 남은 금액 자동 이월
   - 이월 잔고 명확하게 표시
   - 월별 지출만 필터링

**Firebase 구조**:
```
users/{userId}/pocketMoney/
  ├── budget: 500000
  └── transactions/
      └── {transactionId}/
          ├── category: "식비"
          ├── amount: 15000
          ├── date: "2025-10-21"
          └── memo: "점심"
```

**주요 성과**:
- 완전한 잔고 관리 시스템
- 직관적인 3버튼 UI
- 자동 이월로 편리한 관리

---

### Phase 16: 주식 포트폴리오 시각화 (2025-10-21)
**완료 사항**:
1. **DC 계좌 추가**
   - ACCOUNT_TYPES에 DC 추가 (💰 아이콘)
   - 계좌 필터에 DC 버튼 추가

2. **포트폴리오 요약 - 파이 차트 시각화**
   - Recharts 라이브러리 활용
   - 350px 높이, 120px 반지름
   - 12가지 색상 팔레트로 종목 구분
   - 5% 이상 세그먼트만 퍼센트 라벨 표시
   - 커스텀 툴팁 (호버 시 종목명, 평가금액, 비중)
   - **모든 화면 크기에서 표시** (PC/모바일 모두)

3. **보유 종목 목록 (포트폴리오 구성)**
   - 각 종목의 색상 인디케이터 (파이 차트와 일치)
   - 종목명 및 보유 수량
   - 수익/손실 금액 및 퍼센트
   - **포트폴리오 비중** - 전체 자산 대비 퍼센트
   - 색상 프로그레스 바로 비중 시각화
   - 평가금액 표시
   - 호버 시 그림자 효과

4. **색상 시스템**
   - 12색 팔레트: `#6366f1` (보라), `#ec4899` (핑크), `#8b5cf6` (자주) 등
   - 색상 일관성: 차트 → 인디케이터 → 보더 → 프로그레스 바
   - 종목별 고유 색상 자동 할당

**기술 구현**:
- Recharts: ResponsiveContainer, PieChart, Pie, Cell, Tooltip
- 커스텀 툴팁 컴포넌트
- 평가금액 기준 내림차순 정렬
- 동적 색상 스타일 (`style={{ backgroundColor: stock.color }}`)

**파일 수정**:
- `src/constants/stocks.js`: DC 계좌 타입 추가
- `src/components/stock/StockSummary.js`: 210줄 (파이 차트 + 종목 목록)

**주요 성과**:
- 한눈에 보는 포트폴리오 비중 시각화
- 색상으로 구분되는 직관적인 UI
- 모든 디바이스에서 동일한 경험
- 종목별 상세 정보와 차트를 함께 제공

---

## 주요 기능

### 1. 공유 가계부
- 가족 구성원 간 실시간 동기화
- 가족 모드 / 개인 모드 자동 전환
- Firebase 경로: `families/{familyId}/transactions`

### 2. 거래 관리
- 달력 기반 입력/조회
- 카테고리별 분류 (수입/지출)
- 결제 수단 및 메모
- 용돈 사용 여부 체크

### 3. 고정지출
- 매달 자동 등록
- 기간별 설정 (시작일~종료일)
- 활성/비활성 토글

### 4. 용돈 관리
- **추적**: 공유 가계부에서 용돈 사용 표시 + 정산
- **개인 관리**: 별도 페이지에서 잔고 관리
- 추가/차감/수정 기능
- 자동 이월

### 5. 통계 및 분석
- 월별/연도별 통계
- 카테고리별 지출 분석
- 사용자별 통계 (가족 모드)
- 차트 시각화

### 6. 주식 포트폴리오 (관리자 전용)
- 계좌별 종목 관리 (ISA, 연금저축, IRP, DC, 일반)
- 파이 차트로 포트폴리오 비중 시각화
- 종목별 수익률 및 손익 계산
- 현재가 수동 입력 및 일괄 업데이트
- PC/모바일 반응형 (PC: 차트 표시, 모바일: 종목 수만 표시)

### 7. 모바일 최적화
- 반응형 디자인 (640px, 768px 브레이크포인트)
- 하단 네비게이션 바
- 터치 친화적 UI

---

## 기술 스택

### Frontend
- **React** 19.2.0
- **Tailwind CSS** (via CDN)
- **Lucide React** 0.545.0 (아이콘)
- **Recharts** 2.15.0 (차트 라이브러리)

### Backend
- **Firebase Authentication** (Google)
- **Firebase Realtime Database**
- **Firebase Hosting**

### Architecture
- **SOLID 원칙** 기반 모듈화
- Custom Hooks 패턴
- Service Layer 분리

### 디렉토리 구조
```
src/
├── constants/       # 카테고리, 결제수단
├── utils/          # 날짜, 포맷, 저장소
├── services/       # 비즈니스 로직
├── hooks/          # useAuth, useTransactions, usePocketMoney 등
├── firebase/       # Firebase 설정 및 CRUD
├── components/
│   ├── common/     # Button, Input, Modal
│   ├── forms/      # TransactionForm, FixedExpenseForm
│   └── layout/     # Header, Sidebar
└── pages/          # 8개 페이지 (Calendar, Statistics, PocketMoney 등)
```

---

## 배포 이력

| 날짜 | Phase | 빌드 크기 (gzip) | 주요 변경 |
|------|-------|------------------|-----------|
| 10-13 | 1 | - | SOLID 리팩토링 |
| 10-14 | 2-3 | - | Firebase 연동 |
| 10-15 | 4-7 | - | 가족 공유 + 모바일 |
| 10-16 | 8-12 | - | 고정지출 등 |
| 주말 | 13 | 169.91 kB | 달력 UX 개선 |
| 10-21 | 14 | 172.69 kB | 용돈 추적 |
| 10-21 | 15-1 | 174.66 kB | 용돈 페이지 |
| 10-21 | 15-2 | 174.83 kB | 이월 기능 |
| 10-21 | 15-3 | **175.25 kB** | 잔고 관리 완성 |

**현재 URL**: https://woodal-budget.web.app

---

## 다음 단계

### 우선순위 High
- [ ] Firebase Security Rules 강화
- [ ] PWA 전환 (오프라인 지원)
- [ ] 예산 관리 및 알림

### 우선순위 Medium
- [ ] 데이터 백업/복원 UI
- [ ] 월별 리포트 PDF 생성
- [ ] 카테고리 커스터마이징

### 우선순위 Low
- [ ] TypeScript 마이그레이션
- [ ] 단위 테스트 작성
- [ ] 다크모드 완성

---

## 📚 관련 문서

- [상세 개발일지](./개발일지.md) - 전체 개발 과정 상세 기록
- [Firebase 데이터 관리 가이드](./Firebase-데이터-관리-가이드.md)
- [SOLID 가이드](./SOLID.md)
- [README](./README.md)

---

**작성자**: Claude Code
**프로젝트 시작**: 2025-10-13
**총 개발 기간**: 9일
**총 Phase**: 16개 완료
